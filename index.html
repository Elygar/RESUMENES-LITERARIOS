<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Audiolibros y Resúmenes Literarios | Biblioteca Digital</title>
  <meta name="description" content="Explora resúmenes literarios y audiolibros por género y autor. Aprende con análisis claros y en video de obras clásicas y contemporáneas.">
  <meta name="keywords" content="audiolibros, resúmenes de libros, literatura, clásicos, novelas, cuentos, poesía, análisis literario, educación, cultura">
  <meta name="author" content="Biblioteca Digital">
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <style>
    body { font-family:'Segoe UI',Tahoma,sans-serif;margin:0;background:#f4f1fa;color:#333;display:flex;flex-direction:column;min-height:100vh;}
    header{background:linear-gradient(90deg,#5e35b1,#311b92);color:white;padding:20px;text-align:center;position:relative;}
    header h1{margin:0;font-size:2rem;}
    .menu-btn{position:absolute;left:20px;top:10px;cursor:pointer;width:45px;height:45px;}
    .menu-btn img{width:100%;height:100%;object-fit:contain;}
    .search-container{text-align:center;margin:20px;}
    .search-container input{width:70%;max-width:400px;padding:10px;border:1px solid #ccc;border-radius:25px;font-size:16px;}
    .search-container button{padding:10px 18px;background:#5e35b1;color:white;border:none;border-radius:25px;margin-left:10px;cursor:pointer;font-size:15px;}
    .search-container button:hover{background:#311b92;}
    .video-list{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:20px;padding:20px;max-width:1200px;margin:auto;}
    .card{background:white;border-radius:16px;box-shadow:0 4px 12px rgba(0,0,0,0.1);overflow:hidden;transition:transform 0.2s ease;}
    .card:hover{transform:translateY(-5px);}
    .card img{width:100%;height:180px;object-fit:cover;}
    .card-content{padding:15px;}
    .card-content h3{margin:0 0 5px;font-size:1.2rem;color:#4527a0;}
    .btn{display:inline-block;margin-top:10px;padding:8px 16px;background:#5e35b1;color:white;border:none;border-radius:25px;cursor:pointer;}
    .btn:hover{background:#311b92;}
    .pagination{text-align:center;margin:20px;}
    .pagination button{margin:0 5px;padding:8px 14px;border:none;border-radius:20px;background:#5e35b1;color:white;cursor:pointer;}
    .pagination button:disabled{background:#aaa;cursor:not-allowed;}
    .no-results{text-align:center;padding:40px;font-size:1.2rem;color:#777;}
    footer{background:#311b92;color:white;text-align:center;padding:15px;margin-top:auto;}
  </style>
</head>
<body>
  <header>
    <h1>RESÚMENES LITERARIOS</h1>
    <div class="menu-btn" onclick="toggleMenu()"><img src="favicon.png" alt="Menú"></div>
  </header>

  <main>
    <div class="search-container">
      <input type="text" id="searchInput" placeholder="Buscar por título, autor o sinopsis...">
      <button onclick="buscar()">Buscar</button>
    </div>

    <section class="video-list" id="videoList"></section>
    <div id="noResults" class="no-results" style="display:none;">Página no encontrada.</div>

    <div class="pagination" id="pagination"></div>
  </main>

  <footer><p>&copy; 2025 Biblioteca Digital - Audiolibros y Resúmenes Literarios.</p></footer>

  <script>
    let videos = [];
    let currentPage = 1;
    const itemsPerPage = 12;
    let listaActual = [];

    fetch("videos.json?t=" + new Date().getTime())
      .then(r => r.json())
      .then(data => {
        videos = data;
        listaActual = [...videos];
        mostrarPagina(1);
      });

    function mostrarPagina(page) {
      const totalPages = Math.ceil(listaActual.length / itemsPerPage);
      if (page < 1) page = 1;
      if (page > totalPages) page = totalPages;
      currentPage = page;

      const lista = document.getElementById("videoList");
      const noRes = document.getElementById("noResults");
      lista.innerHTML = "";
      noRes.style.display = "none";

      if (listaActual.length === 0) {
        noRes.style.display = "block";
        document.getElementById("pagination").innerHTML = "";
        return;
      }

      const start = (page - 1) * itemsPerPage;
      const end = start + itemsPerPage;
      const paginaVideos = listaActual.slice(start, end);

      paginaVideos.forEach(video => {
        const card = document.createElement("article");
        card.className = "card";
        card.innerHTML = `
          <img src="https://img.youtube.com/vi/${video.id}/hqdefault.jpg" alt="${video.titulo}">
          <div class="card-content">
            <h3>${video.titulo}</h3>
            <p><strong>Autor:</strong> ${video.autor}</p>
            <p>${video.sinopsis}</p>
            <button class="btn" onclick="openVideo('${video.id}')">Ver más</button>
          </div>`;
        lista.appendChild(card);
      });

      generarPaginacion(totalPages);
    }

    function generarPaginacion(totalPages) {
      const pag = document.getElementById("pagination");
      pag.innerHTML = "";

      const inicio = document.createElement("button");
      inicio.textContent = "Inicio";
      inicio.disabled = currentPage === 1;
      inicio.onclick = () => mostrarPagina(1);
      pag.appendChild(inicio);

      const anterior = document.createElement("button");
      anterior.textContent = "Anterior";
      anterior.disabled = currentPage === 1;
      anterior.onclick = () => mostrarPagina(currentPage - 1);
      pag.appendChild(anterior);

      const siguiente = document.createElement("button");
      siguiente.textContent = "Siguiente";
      siguiente.disabled = currentPage === totalPages;
      siguiente.onclick = () => mostrarPagina(currentPage + 1);
      pag.appendChild(siguiente);
    }

    function buscar() {
      const texto = document.getElementById("searchInput").value.toLowerCase().trim();
      if (texto === "") {
        listaActual = [...videos];
        mostrarPagina(1);
        return;
      }

      listaActual = videos.filter(v =>
        v.titulo.toLowerCase().includes(texto) ||
        v.autor.toLowerCase().includes(texto) ||
        v.sinopsis.toLowerCase().includes(texto)
      );
      mostrarPagina(1);
    }

    function openVideo(id) {
      window.open(`https://www.youtube.com/watch?v=${id}`, "_blank");
    }

    function toggleMenu() {
      // Placeholder si luego agregas menú lateral
      console.log("Menú desplegable (no implementado)");
    }
  </script>
</body>
</html>
